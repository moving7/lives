dwfis.define("tools",function(n,e){{var t=e.once=function(n){var e,t;return function(){return t||(t=!0,e=n.apply(this,arguments)),e}},o=(e.getSingle=function(n){var e;return function(){return e||(e=n.apply(this,arguments))}},e.lazyPromise=function(n){var e=t(function(){var e=new $.Deferred;return n(function(){e.resolveWith(this,arguments)},function(){e.rejectWith(this,arguments)}),function(n,t){return e.done(n).fail(t).promise()}});return function(n,t){return e()(n,t)}}),r=e.getScript=function(n,e,t){function o(){r(),"function"==typeof e&&e()}function r(){c.onload=c.onreadystatechange=c.onerror=null,c=null}var a=document,u=a.head||a.getElementsByTagName("head")[0]||a.documentElement,c=a.createElement("script");"onload"in c?c.onload=o:c.onreadystatechange=function(){/loaded|complete/.test(c.readyState)&&o()},"onerror"in c&&(c.onerror=function(){r(),"function"==typeof t&&t()}),c.charset="utf-8",c.type="text/javascript",c.async=!0,c.src=n,u.appendChild(c)},a=(e.lazyLoadScript=function(n){return o(function(e,t){r(n,e,t)})},e.jsonp=function(n){n=$.extend({url:"",data:{},jsonpCallback:"callback",cache:!1},n);var e=$.extend({},n.data),t=e[n.jsonpCallback]="jsonp_callback_"+Math.floor(1e10*Math.random());n.cache||(e._=Math.floor(1e10*Math.random()));var o=$.Deferred();window[t]=function(n){window[t]=null,o.resolve(n)};var a=n.url+(-1==n.url.indexOf("?")?"?":"&")+$.param(e);return r(a,function(){},function(){o.reject()}),o.promise()},e.debounce=function(n,e,t){var o=null,r=function(){o&&clearTimeout(o);var r=this,a=arguments;return t?(o||n.apply(r,a),o=setTimeout(function(){o=null},e)):o=setTimeout(function(){o=null,n.apply(r,a)},e),r};return r.cancel=function(){clearTimeout(o),o=null},r});e.throttle=function(n,e){function t(){a=arguments,u=this,r||(r=setTimeout(function(){r=null,n.apply(u,a),u=a=null},o?0:e),o&&(o=!1))}var o=!0,r=null,a=null,u=null;return t.cancel=function(){clearTimeout(r),r=u=a=null},t},e.loadImg=function(n,e,t,o){return n?(e=e||function(){},t=t||function(){},o=o||new Image,o.readyState?o.onreadystatechange=function(){/loaded|complete/.test(o.readyState)&&(o.onreadystatechange=null,e(o))}:o.onload=function(){e(o)},o.onerror=function(){t(o)},o.src=n,o):void 0},e.DJBHash=function(n){if(n){var e,n=n+"",t=5381;if(n){for(var o=0,r=n.length;r>o;++o)t+=(t<<5)+n.charAt(o).charCodeAt();e=2147483647&t}return e}},e.importStyle=function(n,e){if(!document.getElementById(e)){var t=document.createElement("style");if(e&&(t.id=e),document.getElementsByTagName("head")[0].appendChild(t),t.styleSheet){if(document.getElementsByTagName("style").length>31)throw new Error("Exceed the maximal count of style tags in IE");t.styleSheet.cssText+=n}else t.appendChild(document.createTextNode(n));return t}},e.exposure=function(n,e,t){if(n){n=$(n),e="function"==typeof e?e:function(){},t=t||0;var o,r=$(window),u=a(function(){o=o||n.offset(),o.top<=r.scrollTop()+r.height()+t&&(r.off("scroll",u),e(n))},60);r.on("scroll",u),u()}}}e.toRgb=function(n){var e="",t="";return $.isNumeric(n)&&(n=parseInt(n,10),n>=0&&(t=n.toString(16),e=("000000"+t).slice(t.length))),e},e.format=function(n){return $.isNumeric(n)?(n+"").replace(/(\d)(?=(\d{3})+$)/g,"$1,"):n}});
;dwfis.define("Event",function(){function t(){return{fired:!1,data:[],callbacks:new $.Callbacks}}function n(){function n(n,r,a){if(!i(n)||!e(r))return this;var c=s[n]||(s[n]=new t);return c.callbacks.add(r),a&&c.fired&&r.apply(this,c.data),this}function r(n){if(!i(n))return this;var e=s[n]||(s[n]=new t);return e.fired=!0,e.data=a.call(arguments,1),e.callbacks.fireWith(this,e.data),"ALL"!==n&&r.apply(this,["ALL"].concat(a.call(arguments))),this}function c(t,n){var r=arguments.length;if(0===r)for(var a in s)s.hasOwnProperty(a)&&s[a].callbacks.empty();else if(i(t)){var c=s[t];c&&(1===r?c.callbacks.empty():e(n)&&c.callbacks.remove(n))}return this}function f(t,r,a){if(!i(t)||!e(r))return this;var f=function(){r.apply(this,arguments),c(t,f)};n(t,f,a)}var s={};return{on:n,one:f,off:c,emit:r}}var r=[],a=r.slice,e=function(t){return"function"==typeof t},i=function(t){return"string"==typeof t};return n});
;dwfis.define("h5playeOnloadReport",function(n){function e(n){var e=o.loadImg("//ylog.hiido.com/c.gif?"+$.param(n));setTimeout(function(){e=null},100)}function t(n){var o=$.extend({state:"on",type:0},n,{act:"webh5playeronload",time:parseInt(1*new Date/1e3)});e(o),t=null}var o=n("tools");return function(n){t&&t(n)}});
;dwfis.define("liveRoomPvReport",function(e){function n(e){var n=t.loadImg("//ylog.hiido.com/c.gif?"+$.param(e));setTimeout(function(){n=null},100)}function o(e){var t=$.extend({state:"on",type:0,player:0},e,{act:"webhuyaliveroompv",time:parseInt(1*new Date/1e3)});n(t),o=null}var t=e("tools");return function(e){o&&o(e)}});
;dwfis.define("liveRoomDurationReport",function(e){function t(e){var t=a.loadImg("//ylog.hiido.com/c.gif?"+$.param(e));setTimeout(function(){t=null},100)}function n(e){var n=$.extend({duration:0,type:0},e,{act:"webhuyaliveroomduration",time:parseInt(1*new Date/1e3),player:i.isH5?0:1,state:i.ready()?1:0,user:r?1:0});t(n)}function o(e,t,o){var i=0,a=setInterval(function(){i++,e.duration=o/1e3*i,n(e),i>=t&&clearInterval(a)},o)}var i=e("TTP"),a=e("tools"),r=HUYA_UTIL.getCookieVal("yyuid");return function(e){o(e,2,5e3),o(e,3,2e4),o(e,2,3e5),o(e,3,12e5)}});
;dwfis.define("dialog",function(){function t(e){if(!(this instanceof t))return new t(e);$.isPlainObject(e)||(e={view:e}),$.extend(this,{view:"<div></div>",width:"",height:"",zIndex:999,lock:!0,container:document.body},$.layerSettings,e),this.lock&&(this.overlay=i(e)),this.view=$(this.view).eq(0),this.container=$(this.container).eq(0);var s=this.container[0];s&&s!==window&&s!==document||(this.container=$(document.body)),this.render()}function i(i){i=i||{};var e,s,n=$("<div></div>").css({opacity:i.opacity||.5,backgroundColor:i.color||"#000",zoom:1}),o=$(i.container);return o[0]&&o[0]!==window&&o[0]!==document&&o[0]!==document.body?(e=o.innerWidth(),s=o.innerHeight()):e=s="100%",t({view:n,width:e,height:s,zIndex:i.zIndex,container:i.container,lock:!1})}function e(t){return new e.prototype.init(t)}var s=$.browser.msie?parseInt($.browser.version,10):!1;return t.prototype={render:function(){this.view.css("position","absolute"),this.view.css("zIndex",this.zIndex),this.view.width(this.width),this.view.height(this.height),this.view.appendTo(this.container),this.open(),this.center()},center:function(){function t(){i.css({position:"absolute",left:n.scrollLeft()+(n.width()-i.outerWidth())/2,top:n.scrollTop()+(n.height()-i.outerHeight())/2})}function t(){i.css({position:"fixed",left:(n.width()-i.outerWidth())/2,top:(n.height()-i.outerHeight())/2})}var i=this.view,e=this.container;if(e[0]===document.body){var n=$(window);6==s?("static"===e.css("position").toLowerCase()&&e.css("position","relative"),t(),n.resize(t).scroll(t)):(t(),n.resize(t))}else"static"===e.css("position").toLowerCase()&&e.css("position","relative"),i.css({position:"absolute",left:(e.innerWidth()-i.outerWidth())/2,top:(e.innerHeight()-i.outerHeight())/2})},open:function(){this.view.show(),this.lock&&this.overlay.open()},hide:function(){this.view.hide(),this.lock&&this.overlay.hide()},close:function(){this.view.remove(),this.lock&&this.overlay.close()}},e.loading=function(t,i){return e({title:t,customClass:"loadingDlg",content:'<div class="loadingDlg-cont"><i></i></div>',buttons:[],zIndex:i})},e.alert=function(t,i,s,n){return e({title:t,customClass:"alertDlg",content:'<div class="alertDlg-cont"><div class="alertDlg-txt">'+i+"</div></div>",buttons:s,zIndex:n})},e.suc=function(t,i,s,n){return e({title:t,customClass:"alertDlg",content:'<div class="alertDlg-cont"><i class="icon-suc"></i><p class="alertDlg-msg">'+i+"</p></div>",buttons:s,zIndex:n})},e.err=function(t,i,s,n){return e({title:t,customClass:"alertDlg",content:'<div class="alertDlg-cont"><i class="icon-err"></i><p class="alertDlg-msg">'+i+"</p></div>",buttons:s,zIndex:n})},e.tip=function(t,i,s,n){return e({title:t,customClass:"alertDlg",content:'<div class="alertDlg-cont"><i class="icon-tip"></i><p class="alertDlg-msg">'+i+"</p></div>",buttons:s,zIndex:n})},e.prototype={init:function(i){$.extend(this,{title:"title",content:"",customClass:"",init:function(){},close:function(){},buttons:[{type:0,name:"\u786e\u5b9a",click:function(){},close:!0}]},i);for(var e=0,s=this.buttons.length;s>e;e++)this.buttons[e]=$.extend({type:0===e?0:1,name:"\u786e\u5b9a",click:function(){},close:!0},this.buttons[e]);this.closeCallback=this.close,delete this.close,this.state=1,this.create(),this.layer=t({view:this.view,width:this.width,height:this.height,zIndex:this.zIndex,lock:this.lock,container:this.container}),this.lock&&(this.overlay=this.layer.overlay),$.isFunction(this.init)&&this.init()},create:function(){for(var t=this,i="",e=[],s=null,n=null,o=0,l=this.buttons.length;l>o;o++)s=this.buttons[o],function(i){n=$('<a class="dlg-btn" href="#"></a>').text(i.name).addClass(["dlg-btn-orange","dlg-btn-gray"][i.type]).click(function(e){e.preventDefault(),$.isFunction(i.click)&&i.click.apply(t,arguments),i.close&&t.close()})}(s),e.push(n[0]);this.buttons=$(e),i=['<div class="dlg">','<div class="dlg-hd">','<h5 class="dlg-tit"></h5>',"</div>",'<div class="dlg-bd"></div>','<div class="dlg-ft"></div>','<a class="dlg-close" title="\u5173\u95ed" href="#"></a>',"</div>"].join(""),this.view=$(i).addClass(this.customClass),this.content=$(this.content),""!==this.title?this.view.find(".dlg-tit").html(this.title):this.view.addClass("acephalousDlg"),this.view.find(".dlg-bd").append(this.content),this.buttons.length?this.view.find(".dlg-ft").append(this.buttons):this.view.find(".dlg-ft").remove(),this.view.find(".dlg-close").click(function(i){i.preventDefault(),t.close()})},open:function(){this.state<=1||(this.layer.open(),this.state=1)},hide:function(){0!==this.state&&2!==this.state&&(this.layer.hide(),this.state=2)},close:function(){0!==this.state&&(this.layer.close(),this.state=0,$.isFunction(this.closeCallback)&&this.closeCallback())}},e.prototype.init.prototype=e.prototype,{layer:t,dialog:e}});
;dwfis.define("widget/ucard/Menu.js",function(e,n,t){function i(e){function n(){o.show()}function t(){o.hide()}e=$.extend({options:[],onselect:function(){}},e);var i=$.Callbacks();i.add(e.onselect);var c=['<div class="menu">',function(){var n="";return $.each(e.options,function(e,t){n+="<ul>",$.each(t,function(e,t){n+='<li data-code="'+t.code+'">'+t.content+"</li>"}),n+="</ul>"}),n}(),"</div>"],o=$(c.join(""));return o.on("click","li",function(e){e.preventDefault();var n=$(this).data("code");n&&i.fire(n,this)}),n(),{view:o,open:n,close:t,onselect:function(e){i.add(e)}}}function c(e,n,t){t="function"==typeof t?t:function(){},TTP.isH5?TTP.ready(function(i){i.addTafListener("queryBadgeInfo",function(e){t(e.param?e.param:e),i.removeTafListener("queryBadgeInfo")});var c=new HUYA.BadgeReq;c.lToUid=e,c.lBadgeId=n,i.sendWup("liveui","queryBadgeInfo",c)}):(TTP.one("GetFansBadgeInfoResp",function(e){t(e.param?e.param:e)}),TTP.ready(function(t){t.callAs("GetFansBadgeInfoReq",{user_uid:e,badge_id:n})}))}function o(e,n,t,i){i="function"==typeof i?i:function(){},TTP.isH5?TTP.ready(function(c){c.addTafListener("setBadgeV",function(e){i(e.param?e.param:e),c.removeTafListener("setBadgeV")});var o=new HUYA.SetBadgeVReq;o.lFansUid=e,o.lBadgeId=n,o.iVFlag=t,o.tUserId.lUid=HUYA_UTIL.getCookieVal("yyuid"),o.tUserId.sToken=HUYA_UTIL.getCookieVal("udb_n"),o.tUserId.iTokenType=3,o.tUserId.sCookie=document.cookie,c.sendWup("liveui","setBadgeV",o)}):(TTP.one("setBadgeVRsp",function(e){i(e.param?e.param:e)}),TTP.ready(function(i){i.callAs("SetBadgeVReq",{lFansUid:e,lBadgeId:n,iVFlag:t})}))}var a=e("TTA"),d=e("auditor"),s=e("dialog").dialog,u={MUTE:{content:'<i class="mute-icon"></i><span>\u7981\u6b62\u53d1\u8a00</span>',handle:function(e){d.mute(e.uid,e.nick,e.text)},eid:"jzfy",edes:"\u7981\u8a00\u53d1\u8a00"},BLOCK:{content:'<i class="blacklist-icon"></i><span>\u5c01\u5165\u9ed1\u540d\u5355</span>',handle:function(e){d.banUser(e.uid,e.nick,e.text)},eid:"frhmd",edes:"\u5c01\u5165\u9ed1\u540d\u5355"},BLOCK_IP:{content:'<i class="xip-icon"></i><span>\u5c01\u7981IP</span>',handle:function(e){d.banIP(e.uid,e.nick,e.text)},eid:"fzip",edes:"\u5c01\u7981IP"},VFANS:{content:'<i class="vf-icon"></i><span>\u6388\u4e88\u94bb\u7c89</span>',handle:function(e,n){s.alert("\u8bf7\u786e\u8ba4","\u786e\u5b9a\u6388\u4e88\u3010"+e.nick+"\u3011\u94bb\u7c89\u5417\uff1f",[{name:"\u786e\u5b9a",click:function(){o(e.uid,a.lp,1,function(e){switch(e.iRet){case 0:s.suc("\u64cd\u4f5c\u6210\u529f","\u64cd\u4f5c\u6210\u529f"),$(n).data("code","VFANS_UNDO").html(u.VFANS_UNDO.content);break;case 907:s.err("\u64cd\u4f5c\u5931\u8d25","\u94bb\u7c89\u540d\u989d\u5df2\u6ee1");break;default:s.err("\u64cd\u4f5c\u5931\u8d25","\u64cd\u4f5c\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\uff01("+e.iRet+")")}})},close:!0},{name:"\u53d6\u6d88",close:!0}])},eid:"syzf",edes:"\u6388\u4e88\u94bb\u7c89"},VFANS_UNDO:{content:'<i class="vf-icon"></i><span>\u64a4\u9500\u94bb\u7c89</span>',handle:function(e,n){s.alert("\u8bf7\u786e\u8ba4","\u786e\u5b9a\u64a4\u9500\u3010"+e.nick+"\u3011\u94bb\u7c89\u5417\uff1f",[{name:"\u786e\u5b9a",click:function(){o(e.uid,a.lp,0,function(e){switch(e.iRet){case 0:s.suc("\u64cd\u4f5c\u6210\u529f","\u64cd\u4f5c\u6210\u529f"),$(n).data("code","VFANS").html(u.VFANS.content);break;case 907:s.err("\u64cd\u4f5c\u5931\u8d25","\u94bb\u7c89\u540d\u989d\u5df2\u6ee1");break;default:s.err("\u64cd\u4f5c\u5931\u8d25","\u64cd\u4f5c\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\uff01("+e.iRet+")")}})},close:!0},{name:"\u53d6\u6d88",close:!0}])},eid:"cxzf",edes:"\u64a4\u9500\u94bb\u7c89"}};i.superAuditor=function(e,n){var t=[[{code:"MUTE",content:u.MUTE.content},{code:"BLOCK",content:u.BLOCK.content},{code:"BLOCK_IP",content:u.BLOCK_IP.content}]],c=new i({options:t,onselect:function(n,t){u[n].handle(e,t);try{ya.reportProductEvent({eid:"click/zhibo/gp/"+u[n].eid,eid_desc:"\u70b9\u51fb/\u76f4\u64ad/\u516c\u5c4f/"+u[n].edes})}catch(i){}}});n(c)},i.auditor=function(e,n){c(e.uid,a.lp,function(t){var c=[[{code:"MUTE",content:u.MUTE.content},{code:"BLOCK",content:u.BLOCK.content}]];t&&t.iBadgeLevel>0&&c.push([t.iVFlag?{code:"VFANS_UNDO",content:u.VFANS_UNDO.content}:{code:"VFANS",content:u.VFANS.content}]);var o=new i({options:c,onselect:function(n,t){u[n].handle(e,t);try{ya.reportProductEvent({eid:"click/zhibo/gp/"+u[n].eid,eid_desc:"\u70b9\u51fb/\u76f4\u64ad/\u516c\u5c4f/"+u[n].edes})}catch(i){}}});n(o)})},i.anchor=function(e,n){c(e.uid,a.lp,function(t){var c=[];if(t&&t.iBadgeLevel>0&&c.push([t.iVFlag?{code:"VFANS_UNDO",content:u.VFANS_UNDO.content}:{code:"VFANS",content:u.VFANS.content}]),c.length){var o=new i({options:c,onselect:function(n,t){u[n].handle(e,t);try{ya.reportProductEvent({eid:"click/zhibo/gp/"+u[n].eid,eid_desc:"\u70b9\u51fb/\u76f4\u64ad/\u516c\u5c4f/"+u[n].edes})}catch(i){}}});n(o)}})},t.exports=i});
;dwfis.define("getCreatelayer",function(e){var o=e("tools"),r=o.lazyPromise(function(e){o.getScript("//hd.huya.com/live_room_layer/createLayer-min.js",function(){e(window.Createlayer)})});return $(window).on("load",r),setTimeout(r,1e4),r});
;dwfis.define("widget/ucard",function(require,exports,module){function getUserData(a,n){TTP.ready(function(t){if(TTP.isH5){t.addTafListener("getVipCard",function(a){n(a),t.removeTafListener("getVipCard")});var e=new HUYA.VipCardReq;e.tUserId=t.userId,e.lTid=TTR.id,e.lSid=TTR.sid,e.lPid=TTA.lp,e.lUid=a,t.sendWup("liveui","getVipCard",e)}else TTP.isFlash&&(TTP.one("VipCardRsp",function(a){n(a.param)}),t.callAs("VipCardReq",{uid:a}))})}function Card(a){function n(){i&&(auditor.isAuditor()||auditor.isSuperAuditor()?Menu[auditor.isAuditor()?"auditor":"superAuditor"]({uid:t.lUid,nick:t.sNickName,text:a.muteText},function(a){i.find(".ucard-menu").show(),i.find(".ucard-menu-cont").append(a.view),a.open()}):(i.find(".ucard-menu").hide(),i.find(".ucard-menu-cont").empty()))}a=$.extend({data:null,muteText:"",open:function(){},close:function(){},destroy:function(){}},a);var t=a.data,e=t.tNobleInfo&&t.tNobleInfo.iNobleLevel>0?!0:!1,i=$(e?tpl_noble({data:t}):tpl_fans({data:t})),r={data:t,view:i,open:function(){i&&(i.show(),a.open())},close:function(){i&&(i.hide(),a.close())},destroy:function(){i&&(i.remove(),r.view=i=null,a.destroy())}};return i.on("click",".ucard-x",function(a){a.preventDefault(),r.close()}),i.on("click",".ucard-btn",function(a){a.preventDefault(),noble.open();try{ya.reportProductEvent({eid:"click/zhibo/gp/xkp/gz",eid_desc:"\u70b9\u51fb/\u76f4\u64ad/\u516c\u5c4f/\u5c0f\u5361\u7247/\u5f00\u901a\u8d35\u65cf"})}catch(a){}}),auditor.onEnter(n),auditor.change(n),HUYA_UTIL.getCookieVal("yyuid")==TTA.lp&&Menu.anchor({uid:t.lUid,nick:t.sNickName,text:a.muteText},function(a){i.find(".ucard-menu").show(),i.find(".ucard-menu-cont").append(a.view),a.open()}),r.open(),r}var TTR=(require("tools"),require("TTR")),TTA=require("TTA"),auditor=require("auditor"),Menu=require("widget/ucard/Menu.js"),tpl_noble=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{}){__p+="";var mounts=["","//a.msstatic.com/huya/main/widget/ucard/img/mounts-1_bda40a1.gif","//a.msstatic.com/huya/main/widget/ucard/img/mounts-2_6e20719.gif","//a.msstatic.com/huya/main/widget/ucard/img/mounts-3_8ab71ec.gif","//a.msstatic.com/huya/main/widget/ucard/img/mounts-4_f75011d.gif","//a.msstatic.com/huya/main/widget/ucard/img/mounts-5_6b0d152.gif","//a.msstatic.com/huya/main/widget/ucard/img/mounts-6_3954060.gif"];__p+='\r\n\r\n<div class="ucard-noble ucard-noble-'+(null==(__t=data.tNobleInfo.iNobleLevel)?"":__t)+'">\r\n    <div class="ucard-noble-wrap">\r\n        <i class="ucard-x"></i>\r\n        <div class="ucard-menu">\r\n            <i class="ucard-menu-tit">\u7ba1\u7406</i>\r\n            <div class="ucard-menu-cont"></div>\r\n        </div>\r\n        <span class="ucard-avatar"><img src="'+(null==(__t=TT.trimUrl(data.sLogoURL))?"":__t)+'" alt="'+(null==(__t=data.sNickName)?"":_.escape(__t))+'" onerror="this.src=\'images/default_avatar.jpg\';this.onerror=null;" /></span>\r\n        <i class="noble-icon noble-level-'+(null==(__t=data.tNobleInfo.iNobleLevel)?"":__t)+'"></i>\r\n        <div class="ucard-info">\r\n            <p class="ucard-nick"><span class="ucard-name" title="'+(null==(__t=data.sNickName)?"":_.escape(__t))+'">'+(null==(__t=data.sNickName)?"":_.escape(__t))+'</span><i class="ucard-'+(null==(__t=1===data.iGender?"boy":"girl")?"":__t)+'"></i><i class="level-icon level-icon'+(null==(__t=data.iUserLevel)?"":__t)+'"></i></p>\r\n            <div class="ucard-age">\r\n                <p><i class="ucard-id"></i><span>'+(null==(__t=data.iAge)?"":__t)+'\u5c81</span></p><p><i class="ucard-location"></i><span>'+(null==(__t=data.sLocation||"\u706b\u661f")?"":_.escape(__t))+'</span></p>\r\n            </div>\r\n            <p class="ucard-intro" title="'+(null==(__t=data.sSign)?"":_.escape(__t))+'">'+(null==(__t=data.sSign)?"":_.escape(__t))+'</p>\r\n        </div>\r\n        <span class="ucard-noble-mounts"><img src="'+(null==(__t=mounts[data.tNobleInfo.iNobleLevel])?"":__t)+'" alt="'+(null==(__t=data.tNobleInfo.sNobleName)?"":_.escape(__t))+'" /></span>\r\n        <a href="#" class="ucard-btn">\u5f00\u901a\u8d35\u65cf</a>\r\n    </div>\r\n</div>'}return __p},tpl_fans=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="ucard-fans">\r\n    <i class="ucard-x"></i>\r\n    <div class="ucard-menu">\r\n        <i class="ucard-menu-tit">\u7ba1\u7406</i>\r\n        <div class="ucard-menu-cont"></div>\r\n    </div>\r\n    <span class="ucard-avatar"><img src="'+(null==(__t=TT.trimUrl(data.sLogoURL))?"":__t)+'" alt="'+(null==(__t=data.sNickName)?"":_.escape(__t))+'" onerror="this.src=\'images/default_avatar.jpg\';this.onerror=null;" /></span>\r\n    <div class="ucard-info">\r\n        <p class="ucard-nick"><span class="ucard-name">'+(null==(__t=data.sNickName)?"":_.escape(__t))+'</span><i class="ucard-'+(null==(__t=1===data.iGender?"boy":"girl")?"":__t)+'"></i><i class="level-icon level-icon'+(null==(__t=data.iUserLevel)?"":__t)+'"></i></p>\r\n        <div class="ucard-age">\r\n            <p><i class="ucard-id"></i><span>'+(null==(__t=data.iAge)?"":__t)+'\u5c81</span></p><p><i class="ucard-location"></i><span>'+(null==(__t=data.sLocation||"\u706b\u661f")?"":_.escape(__t))+'</span></p>\r\n        </div>\r\n        <p class="ucard-intro" title="'+(null==(__t=data.sSign)?"":_.escape(__t))+'">'+(null==(__t=data.sSign)?"":_.escape(__t))+'</p>\r\n    </div>\r\n    <a href="#" class="ucard-btn">\u5f00\u901a\u8d35\u65cf</a>\r\n</div>';return __p},noble=require("noble"),creatCard=function(a){a=$.extend({uid:"",muteText:"",init:function(){},open:function(){},close:function(){},destroy:function(){}},a);var n=a.uid;n&&getUserData(n,function(n){creatCard.only&&creatCard.only.destroy(),creatCard.only=new Card({data:n,muteText:a.muteText,open:a.open,close:a.close,destroy:a.destroy}),a.init(creatCard.only)})};return creatCard});
;dwfis.define("widget/icon-anchor-lv",function(i,n,c){function o(i){return $.isNumeric(i)?'<i class="icon-anchor-lv icon-anchor-lv'+i+'"></i>':""}c.exports={create:o}});
;dwfis.define("widget/fansBadgeAnchor",function(require,exports,module){function getAnchorActInfo(n,t){t="function"==typeof t?t:function(){},TTP.isH5?TTP.ready(function(e){e.addTafListener("getPresenterActivity",function(n){t(n),e.removeTafListener("getPresenterActivity")});var a=new HUYA.PresenterActivityReq;a.tId=e.userId,a.lUid=n,e.sendWup("huyauserui","getPresenterActivity",a)}):(TTP.one("PresenterActivityRsp",function(n){t(n.param)}),TTP.ready(function(t){t.callAs("PresenterActivityReq",{lBadgeId:n})}))}function Anchor(n){var t=$(tpl(n));return{view:t,close:function(){t.remove()}}}var iconAnchorLv=require("widget/icon-anchor-lv"),tpl=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="fansBadgeAnchor">\r\n    <div class="fansBadgeAnchor-hd">\u5fbd\u7ae0\u4e3b\u64ad</div>\r\n    <div class="fansBadgeAnchor-bd">\r\n        <a class="fansBadgeAnchor-avatar" target="_blank" href="'+(null==(__t=TT.app.main+(tAct.tLive.sPrivateHost||tAct.tLive.lYYId))?"":__t)+'">\r\n            <img src="'+(null==(__t=TT.trimUrl(tAct.sAvatar))?"":__t)+'" alt="\u4e3b\u64ad\u5934\u50cf" />\r\n            ',tAct.bLive&&(__p+="\r\n            <i>\u5728\u64ad</i>\r\n            "),__p+='\r\n        </a>\r\n        <div class="fansBadgeAnchor-cont">\r\n            <div class="fansBadgeAnchor-nick">\r\n                <a target="_blank" href="'+(null==(__t=TT.app.main+(tAct.tLive.sPrivateHost||tAct.tLive.lYYId))?"":__t)+'" class="fansBadgeAnchor-name" title="'+(null==(__t=tAct.sNick)?"":_.escape(__t))+'">'+(null==(__t=tAct.sNick)?"":_.escape(__t))+"</a>\r\n                "+(null==(__t=iconAnchorLv.create(tAct.iLevel))?"":__t)+'\r\n            </div>\r\n            <div class="fansBadgeAnchor-tag">\r\n                ',tAct.tLive.sGameName&&(__p+="\r\n                <span>"+(null==(__t=tAct.tLive.sGameName)?"":__t)+"</span>\r\n                "),__p+='\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="fansBadgeAnchor-ft">\r\n        <p class="fansBadgeAnchor-fansNum">\u5fbd\u7ae0\u4eba\u6570: <em>'+(null==(__t=tAct.iFansNum)?"":__t)+'</em></p>\r\n        <p class="fansBadgeAnchor-fansDm">'+(null==(__t=tAct.sDiamondUrl?'<img src="'+TT.trimUrl(tAct.sDiamondUrl).replace(".png","_3.png")+'" />':"<i></i>")?"":__t)+"<span>\u94bb\u7c89: <em>"+(null==(__t=tAct.iDiamondFansNum)?"":__t)+"/"+(null==(__t=tAct.iDiamondFansQuota)?"":__t)+"</em></span></p>\r\n    </div>\r\n</div>";return __p},cache={};return function(n){var t=n.uid;t&&(n.init="function"==typeof n.init?n.init:function(){},n.maxAge="number"==typeof n.maxAge?n.maxAge:12e4,cache[t]?n.init(Anchor(cache[t])):getAnchorActInfo(t,function(e){n.maxAge&&(cache[t]=e,setTimeout(function(){cache[t]=null},n.maxAge)),n.init(Anchor(e))}))}});
;dwfis.define("DefineValue",function(n,t,e){function u(n,t){var e=n,u="function"==typeof t?t:i,f=new $.Callbacks,o=function(){return e},c=function(n){u(n)&&n!==e&&(e=n,f.fire(e))},r=function(n){f.add(n)};return{get:o,set:c,change:r}}function f(n){var t=o.lazyPromise(function(t){n(function(n,e){t(new u(n,e))})}),e=function(n){return t(function(t){n(t.get())})},f=function(n){t(function(t){t.set(n)})},i=function(n){t(function(t){t.change(n)})};return{get:e,set:f,change:i}}var o=n("tools"),i=function(){return!0};e.exports=function(n,t){return"function"==typeof n?f(n):u(n,t)}});
;dwfis.define("widget/fans-icon",function(n,i,s){function a(n,i,s){return!$.isNumeric(n)||parseInt(n,10)<1||!i?"":"<span"+(s?' data-id="'+s+'"':"")+' class="fans-icon fans-icon-'+n+'">'+i+"</span>"}s.exports={create:a}});
;dwfis.define("widget/fansbadge",function(require,exports,module){function getBadgeList(a){a="function"==typeof a?a:function(){},TTP.isH5?TTP.ready(function(e){e.addTafListener("queryBadgeInfoList",function(n){a(n.param?n.param:n),e.removeTafListener("queryBadgeInfoList")});var n=new HUYA.BadgeInfoListReq;n.tUserId=e.userId,e.sendWup("liveui","queryBadgeInfoList",n)}):(TTP.one("GetFansBadgeListResp",function(e){a(e.param?e.param:e)}),TTP.ready(function(a){a.callAs("GetFansBadgeListReq")}))}function badgeUseReq(a,e){e="function"==typeof e?e:function(){},TTP.ready(TTP.isH5?function(n){n.addTafListener("useBadge",function(a){e(a.param?a.param:a),n.removeTafListener("useBadge")});var t=new HUYA.BadgeReq;t.tUserId=n.userId,t.lBadgeId=a,n.sendWup("liveui","useBadge",t)}:function(n){TTP.one("UseFansBadgeResp",function(a){e(a.param?a.param:a)}),n.callAs("UseFansBadgeReq",{lBadgeId:a})})}function getBadgeInfo(a,e){e="function"==typeof e?e:function(){},TTP.ready(TTP.isH5?function(n){n.addTafListener("getBadgeName",function(a){e(a.param?a.param:a),n.removeTafListener("getBadgeName")});var t=new HUYA.BadgeReq;t.tUserId=n.userId,t.lBadgeId=a,n.sendWup("liveui","getBadgeName",t)}:function(n){TTP.one("GetFansBadgeNameResp",function(a){e(a.param?a.param:a)}),n.callAs("GetFansBadgeNameReq",{lBadgeId:a})})}function Badge(a){function e(a){if(a=a.param?a.param:a,a.iNewBadge)t.push(a.tBadgeInfo),n.emit("change",a);else{var e=s(a.tBadgeInfo.lBadgeId);e&&($.extend(e,a.tBadgeInfo),n.emit("change",a,e===i))}}var n=new Event,t=a.vBadgeInfo&&a.vBadgeInfo.value&&a.vBadgeInfo.value.length?a.vBadgeInfo.value:[],d=a.lUsingBadgeId;1===t.length&&0!==a.lUsingBadgeId&&(d=t[0].lBadgeId);var s=function(a){var e=null;return $.each(t,function(n,t){return t&&t.lBadgeId==a?(e=t,!1):void 0}),e},i=s(d),r=function(a){if(a!=d){var e=i;if(0===a)badgeUseReq(0),d=0,i=null,n.emit("use",i,e,-1);else{var r=s(a);r&&(badgeUseReq(a,function(){}),d=a,i=r,n.emit("use",i,e,indexOf.call(t,i)))}}};return TTP.isH5?TTP.ready(function(a){a.addTafListener("6232",e)}):TTP.on("FansBadgeUpNotice",e),{use:r,onUse:function(a){n.on("use",a)},onChange:function(a){n.on("change",a)},getItem:s,all:function(){return t},eq:function(a){return t[a]?$.extend({},t[a]):null},total:function(){return t.length},current:function(){return i?$.extend({},i):i}}}function init(a){var e=function(){var a=$.Deferred(),e=$.Deferred(),n=$.when(a,e);getBadgeList(function(e){a.resolve(e)}),getBadgeInfo(TTA.lp,function(a){e.resolve(a)});var t=setTimeout(function(){a.reject(),e.reject()},6e4);return n.done(function(){clearTimeout(t)}),n}();!function(){function a(){clearTimeout(t),$("#J_fansBadgeDetail").show(),d||(d=!0,$("#J_fansBadgeDetail").html(tpl_loading()))}function n(){t=setTimeout(function(){$("#J_fansBadgeDetail").hide()},200)}var t,d;$("#chatHostPic").on("mouseenter.loading",a).on("mouseleave.loading",n),$("#J_fansBadgeDetail").on("mouseenter.loading",a).on("mouseleave.loading",n),e.always(function(){$("#J_chatFansBadge").removeClass("chat-fansbadge-loading"),$("#chatHostPic").off("mouseenter.loading").off("mouseleave.loading"),$("#J_fansBadgeDetail").off("mouseenter.loading").off("mouseleave.loading").empty()})}();var n,t;e.done(function(a,e){function d(){var a=n.current();r.html(n.current()?fansIcon.create(a.iBadgeLevel,a.sBadgeName):n.total()>0?'<i class="badge-null"></i>':'<i class="badge-empty"></i>')}function s(){l.html(n.current()?tpl_badge({data:n.current()}):n.total()>0?tpl_null({total:n.total()}):tpl_empty({data:e}))}function i(){n.total()>0&&(o.empty(),o.html(tpl_list({data:n.all(),currenBadge:n.current()})))}n=new Badge(a),t=e;var r=$("#J_chatFansBadge");d(),n.onUse(d),n.onChange(function(a,e){e&&a.iBadgeLevelChanged&&d(),a.iNewBadge&&!n.current()&&r.html('<i class="badge-null"></i>')});var l=$("#J_fansBadgeDetail");s(),n.onUse(s),n.onChange(function(a,e){e&&l.html(tpl_badge({data:n.current()})),a.iNewBadge&&!n.current()&&l.html(tpl_null({total:n.total()}))});var o=$("#J_fansBadgeList");i(),n.onChange(function(a){a.iNewBadge&&i()}),n.onUse(function(a,e,n){var t=o.find("li");t.removeClass("on"),-1!=n&&t.eq(n).addClass("on")}),o.on("click","li",function(a){a.preventDefault();var e=$(this).index();n.use(n.eq(e).lBadgeId)}).on("click",".fansBadge-itemNull",function(a){a.preventDefault(),n.use(0)});var g,f,u=function(){clearTimeout(g),l.show()},c=function(){clearTimeout(g),g=setTimeout(function(){l.hide()},200)},_=function(){if(clearTimeout(f),o.show(),u(),n.total()>8){var a=o.find(".fansBadge-items");a.data("jsp")||a.jScrollPane({mouseWheelSpeed:20,verticalGutter:0,isOutsideNotPrevent:!1})}},p=function(){clearTimeout(f),f=setTimeout(function(){o.hide()},200)};$("#J_chatFansBadge").on("mouseenter",u).on("mouseleave",c),l.on("mouseenter",u).on("mouseleave",c),l.on("mouseenter",".J_showfansBadgeList",_).on("mouseleave",".J_showfansBadgeList",p),o.on("mouseenter",_).on("mouseleave",function(){p(),c()});var v=$("#J_fansBadgeTip");n.onChange(function(a){function e(){v.empty().hide(),a=null}function e(){clearInterval(t),v.empty().hide(),a=null}if(a.iNewBadge)v.html(tpl_new({data:a.tBadgeInfo})),v.show(),v.find(".J_fansBadgeTipUse").on("click",function(t){t.preventDefault(),n.use(a.tBadgeInfo.lBadgeId),e()}),v.find(".J_fansBadgeTipClose").on("click",function(a){a.preventDefault(),e()});else if(a.iBadgeLevelChanged){var t,d=5;v.html(tpl_up({data:a.tBadgeInfo,timeout:d})),v.show(),v.find(".J_fansBadgeTipClose").on("click",function(a){a.preventDefault(),e()});var s=v.find(".J_fansBadgeTipCd");t=setInterval(function(){s.text(--d),0===d&&e()},1e3)}})}),e.fail(function(){n=new Badge({vBadgeInfo:{value:[]}}),t={lBadgeId:TTA.lp,sBadgeName:""},$("#J_chatFansBadge").removeClass("chat-fansbadge-loading").html('<i class="badge-null"></i>')}),e.always(function(){a(n,t)})}var TTA=require("TTA"),TTP=require("TTP"),Event=require("Event"),indexOf=[].indexOf||function(a){for(var e=0,n=this.length;n>e;e++)if(this[e]===a)return e;return-1},fansIcon=require("widget/fans-icon"),tpl_badge=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="fansBadge-box">\r\n    <div class="fansBadge-box-hd">\u6211\u7684\u7c89\u4e1d\u5fbd\u7ae0</div>\r\n    <div class="fansBadge-box-bd">\r\n        <div class="fansBadge-detail-badge">\r\n            <p class="badge-icon">'+(null==(__t=fansIcon.create(data.iBadgeLevel,data.sBadgeName))?"":__t)+'</p>\r\n            <div class="badge-score">\r\n                <span class="badge-lv">Lv'+(null==(__t=data.iBadgeLevel)?"":__t)+'</span>\r\n                <p class="badge-progress"><i style="width:'+(null==(__t=data.iScore/data.iNextScore*100)?"":__t)+'%;"></i><span>'+(null==(__t=data.iScore)?"":__t)+"/"+(null==(__t=data.iNextScore)?"":__t)+'</span></p>\r\n                <a class="fansBadge-qm" target="_blank" href="'+(null==(__t=TT.app.hd)?"":__t)+'0301fans/index.html"></a>\r\n            </div>\r\n            <p class="badge-rank">\u6392\u540d <em class="fansBadge-hig">'+(null==(__t=data.iRank)?"":__t)+'</em></p>\r\n            <div class="badge-update">\r\n            ',__p+=data.iQuotaUsed>0?'\r\n                <div class="badge-update-up">\r\n                    <p><i class="fansBadge-stateUp update-state"></i>\u4eca\u65e5\u4eb2\u5bc6\u5ea6<em>+'+(null==(__t=data.iQuotaUsed)?"":__t)+"</em></p>\r\n                    <p>\u4eca\u65e5\u4eb2\u5bc6\u5ea6\u4e0a\u6da8\u4e0a\u9650<em>"+(null==(__t=data.iQuotaUsed)?"":__t)+"/"+(null==(__t=data.iQuota)?"":__t)+"</em></p>\r\n                </div>\r\n            ":data.iQuotaUsed<0?'\r\n                <div class="badge-update-down">\r\n                    <p><i class="fansBadge-stateDown update-state"></i>\u4eca\u65e5\u4eb2\u5bc6\u5ea6<em>'+(null==(__t=data.iQuotaUsed)?"":__t)+"</em>\uff0c\u51cf\u5c11\u52300\u5c06\u5931\u53bb\u5fbd\u7ae0</p>\r\n                    <p>\u8d60\u9001\u4e3b\u64ad\u793c\u7269\uff0c\u4eb2\u5bc6\u5ea6\u4f1a\u91cd\u65b0\u4e0a\u6da8~</p>                \r\n                </div>\r\n            ":'\r\n                <div class="badge-update-in">\r\n                    <p><i class="fansBadge-stateStop update-state"></i>\u4eca\u65e5\u4eb2\u5bc6\u5ea6<em>+'+(null==(__t=data.iQuotaUsed)?"":__t)+"</em>\uff0c\u8fde\u7eed7\u5929\u65e0\u589e\u957f\uff0c\u4eb2\u5bc6\u5ea6\u4f1a\u4e0b\u964d\u54e6\uff01</p>\r\n                </div>\r\n            ",__p+='\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <a class="fansBadge-more J_showfansBadgeList" href="#">\u5207\u6362\u5fbd\u7ae0 <i>&gt;</i></a>\r\n</div>';return __p},tpl_null=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="fansBadge-box">\r\n    <div class="fansBadge-box-hd">\u6211\u7684\u7c89\u4e1d\u5fbd\u7ae0</div>\r\n    <div class="fansBadge-box-bd">\r\n        <div class="fansBadge-detail-null">\r\n            <img src="'+(null==(__t="//a.msstatic.com/huya/main/widget/fansbadge/img/a_cf56f98.png")?"":__t)+'" />\r\n            <p class="res">\u5f53\u524d\u6ca1\u6709\u4f69\u6234\u5fbd\u7ae0 <a class="fansBadge-qm" target="_blank" href="'+(null==(__t=TT.app.hd)?"":__t)+'0301fans/index.html"></a></p>\r\n            <p class="tip">\u60a8\u6709<em class="fansBadge-hig">'+(null==(__t=total)?"":__t)+'\u4e2a</em>\u53ef\u4f69\u6234\u7684\u5fbd\u7ae0\u54e6\uff01</p>\r\n        </div>\r\n    </div>\r\n    <a class="fansBadge-more J_showfansBadgeList" href="#">\u5207\u6362\u5fbd\u7ae0 <i>&gt;</i></a>\r\n</div>';return __p},tpl_empty=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="fansBadge-box">\r\n    <div class="fansBadge-box-hd">\u6211\u7684\u7c89\u4e1d\u5fbd\u7ae0</div>\r\n    <div class="fansBadge-box-bd">\r\n        <div class="fansBadge-detail-empty">\r\n            <img src="'+(null==(__t="//a.msstatic.com/huya/main/widget/fansbadge/img/c_b6c5cf4.png")?"":__t)+'" />\r\n            <p class="res">\u60a8\u6ca1\u6709\u5fbd\u7ae0\u53ef\u4f69\u6234 <a class="fansBadge-qm" target="_blank" href="'+(null==(__t=TT.app.hd)?"":__t)+'0301fans/index.html"></a></p>\r\n            ',__p+=data.lBadgeId&&data.sBadgeName?'\r\n                <p class="tip">\u4e00\u6b21\u6027\u9001<em class="fansBadge-hig">10\u4e2a\u793c\u7269</em>\u53ef\u4ee5\u6210\u4e3a\u7c89\u4e1d\uff0c<br />\u83b7\u5f97\u5fbd\u7ae0: '+(null==(__t=fansIcon.create(1,data.sBadgeName))?"":__t)+"</p>\r\n            ":'\r\n                <p class="tip">\u5f53\u524d\u4e3b\u64ad\u8fd8\u6ca1\u6709\u5f00\u901a\u7c89\u4e1d\u5fbd\u7ae0</p>\r\n            ',__p+='\r\n        </div>\r\n    </div>\r\n    <a class="fansBadge-more" target="_blank" href="'+(null==(__t=TT.app.hd)?"":__t)+'0301fans/index.html">\u8be6\u60c5 <i>&gt;</i></a>\r\n</div>';return __p},tpl_loading=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="fansBadge-box">\r\n    <div class="fansBadge-box-hd">\u6211\u7684\u7c89\u4e1d\u5fbd\u7ae0</div>\r\n    <div class="fansBadge-box-bd">\r\n        <div class="fansBadge-detail-loading">\r\n            <img src="'+(null==(__t="//a.msstatic.com/huya/main/widget/fansbadge/img/b_f77bd96.png")?"":__t)+'" />\r\n            <p>\u52aa\u529b\u83b7\u53d6\u6570\u636e\u4e2d\uff0c\u8bf7\u7a0d\u7b49\u7247\u523b <a class="fansBadge-qm" target="_blank" href="'+(null==(__t=TT.app.hd)?"":__t)+'0301fans/index.html"></a></p>\r\n        </div>\r\n    </div>\r\n    <a class="fansBadge-more" target="_blank" href="'+(null==(__t=TT.app.hd)?"":__t)+'0301fans/index.html">\u8be6\u60c5 <i>&gt;</i></a>\r\n</div>';return __p},tpl_list=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{}){__p+='<div class="fansBadge-box">\r\n    <div class="fansBadge-box-hd">\u9009\u62e9\u4f60\u8981\u4f69\u6234\u7684\u5fbd\u7ae0</div>\r\n    <div class="fansBadge-items">\r\n        <ul>\r\n        ';for(var i=0,l=data.length;l>i;i++){var badge=data[i];__p+="\r\n            <li"+(null==(__t=currenBadge&&currenBadge.lBadgeId==badge.lBadgeId?' class="on"':"")?"":__t)+">\r\n                "+(null==(__t=fansIcon.create(badge.iBadgeLevel,badge.sBadgeName))?"":__t)+'\r\n                <span class="nick">'+(null==(__t=badge.sPresenterNickName)?"":_.escape(__t))+"</span>\r\n            </li>\r\n        "}__p+='\r\n        </ul>\r\n    </div>\r\n    <a class="fansBadge-itemNull" href="#">\u4e0d\u4f69\u6234\u4efb\u4f55\u5fbd\u7ae0</a>\r\n</div>'}return __p},tpl_up=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="fansBadge-box">\r\n    <div class="fansBadge-tip-up">\r\n        <p>\u606d\u559c\u60a8\u62e5\u6709\u7684 '+(null==(__t=fansIcon.create(data.iBadgeLevel,data.sBadgeName))?"":__t)+' \u7c89\u4e1d\u5fbd\u7ae0\u5347\u7ea7\u4e86\uff01</p>\r\n        <div class="fansBadge-tip-ft">\r\n            <a href="#" class="J_fansBadgeTipClose">\u6211\u77e5\u9053\u4e86(<i class="J_fansBadgeTipCd">'+(null==(__t=timeout)?"":__t)+"</i>)</a>\r\n        </div>\r\n    </div>\r\n</div>";return __p},tpl_new=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="fansBadge-box">\r\n    <div class="fansBadge-tip-new">\r\n        <p>\u606d\u559c\u60a8\u83b7\u5f97 '+(null==(__t=fansIcon.create(data.iBadgeLevel,data.sBadgeName))?"":__t)+' \u7c89\u4e1d\u5fbd\u7ae0\uff01</p>\r\n        <div class="fansBadge-tip-ft">\r\n            <a href="#" class="J_fansBadgeTipUse">\u7acb\u5373\u4f69\u6234</a>\r\n            <a href="#" class="J_fansBadgeTipClose">\u5173\u95ed</a>\r\n        </div>\r\n    </div>\r\n</div>';return __p},badgeReady=$.Deferred();if(HUYA_UTIL.getCookieVal("yyuid"))init(function(a,e){badgeReady.resolve(a,e)});else{var badge=new Badge({vBadgeInfo:{value:[]}});$("#J_chatFansBadge").removeClass("chat-fansbadge-loading").html('<i class="badge-null"></i>'),getBadgeInfo(TTA.lp,function(a){badgeReady.resolve(badge,a)})}return{ready:function(a){badgeReady.done(a)}}});
;dwfis.define("widget/userLevel",function(require,exports,module){function UserLevel(){var n=new DefineValue(function(n){HUYA_UTIL.getCookieVal("yyuid")?getUserLevelInfo(function(e){n(e.tUserProfile.tUserBase.iUserLevel)}):n(0)});return TTP.ready(function(e){TTP.isH5?e.addTafListener("1000106",function(e){n.set(e.iNewLevel)}):TTP.isFlash&&TTP.on("getUserLevelUpgrade",function(e){n.set(e.param.iNewLevel)})}),{get:n.get,change:n.change}}function Tips(level){var data={level:level,msg:getMsg(level)},render=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="js-levelup-tips">\r\n    <div class="close-levelup-tips" title="\u5173\u95ed"></div>\r\n    <div class="levelup-tips-cnt">\r\n		<p>\u606d\u559c\u4f60\u5347\u7ea7\u5230 <em>'+(null==(__t=level)?"":__t)+'</em>\u7ea7<span class="level-icon level-icon'+(null==(__t=level)?"":__t)+'"></span></p>\r\n		<div>'+(null==(__t=msg)?"":__t)+"</div>\r\n    </div>\r\n</div>";return __p},elm=$(render(data));elm.on("click",".close-levelup-tips",function(n){n.preventDefault(),elm.remove()}),$(".chat-room__panel").append(elm)}function getMsg(n){for(var e=[{maxVal:5,info:function(n){return"\u8fd8\u5dee"+(6-n)+'\u7ea7\uff0c\u53ef\u83b7\u5f97\u4e03\u5f69\u5f39\u5e55<span style="background:#66ff99"></span>'}},{maxVal:6,info:function(){return'\u83b7\u5f97\u4e03\u5f69\u5f39\u5e55<span style="background:#66ff99"></span>'}},{maxVal:9,info:function(n){return"\u8fd8\u5dee"+(10-n)+'\u7ea7\uff0c\u53ef\u83b7\u5f97\u4e03\u5f69\u5f39\u5e55<span style="background:#33ffcc"></span>'}},{maxVal:10,info:function(){return'\u83b7\u5f97\u4e03\u5f69\u5f39\u5e55<span style="background:#33ffcc"></span>'}},{maxVal:11,info:function(){return"\u89e3\u9501\u767d\u94f6\u5b9d\u7bb1"}},{maxVal:12,info:function(n){return"\u8fd8\u5dee"+(13-n)+'\u7ea7\uff0c\u53ef\u83b7\u5f97\u4e03\u5f69\u5f39\u5e55<span style="background:#ccff66"></span>'}},{maxVal:13,info:function(){return'\u83b7\u5f97\u4e03\u5f69\u5f39\u5e55<span style="background:#ccff66"></span>'}},{maxVal:15,info:function(n){return"\u8fd8\u5dee"+(16-n)+'\u7ea7\uff0c\u53ef\u83b7\u5f97\u4e03\u5f69\u5f39\u5e55<span style="background:#33ffff"></span>'}},{maxVal:16,info:function(){return'\u83b7\u5f97\u4e03\u5f69\u5f39\u5e55<span style="background:#33ffff"></span>'}},{maxVal:17,info:function(){return'\u8fd8\u5dee1\u7ea7\uff0c\u53ef\u83b7\u5f97\u4e03\u5f69\u5f39\u5e55<span style="background:#33ccff"></span>'}},{maxVal:18,info:function(){return'\u83b7\u5f97\u4e03\u5f69\u5f39\u5e55<span style="background:#33ccff"></span>'}},{maxVal:19,info:function(){return"\u8fd8\u5dee1\u7ea7\uff0c\u53ef\u83b7\u5f97\u8896\u73cd\u5f39\u5e55"}},{maxVal:20,info:function(){return"\u89e3\u9501\u8896\u73cd\u5f39\u5e55\uff01"}},{maxVal:21,info:function(){return"\u89e3\u9501\u9ec4\u91d1\u5b9d\u7bb1"}},{maxVal:22,info:function(){return'\u83b7\u5f97\u4e03\u5f69\u5f39\u5e55<span style="background:#ff3333"></span>'}},{maxVal:23,info:function(){return'\u8fd8\u5dee1\u7ea7\uff0c\u53ef\u83b7\u5f97\u4e03\u5f69\u5f39\u5e55<span style="background:#cc0033"></span>'}},{maxVal:24,info:function(){return'\u83b7\u5f97\u4e03\u5f69\u5f39\u5e55<span style="background:#cc0033"></span>'}},{maxVal:25,info:function(){return"\u89e3\u9501\u9876\u90e8\u9738\u5c4f\u5f39\u5e55\uff01"}},{maxVal:26,info:function(){return'\u83b7\u5f97\u4e03\u5f69\u5f39\u5e55<span style="background:#ff3366"></span>'}},{maxVal:29,info:function(n){return"\u8fd8\u5dee"+(30-n)+"\u7ea7\uff0c\u89e3\u9501\u5e95\u90e8\u9738\u5c4f\u5f39\u5e55\uff01"}},{maxVal:30,info:function(){return"\u89e3\u9501\u5e95\u90e8\u9738\u5c4f\u5f39\u5e55\uff01"}}],a=0;a<e.length;a++)if(n<=e[a].maxVal)return e[a].info(n)}var TTP=require("TTP"),DefineValue=require("DefineValue"),getUserLevelInfo=function(n){TTP.ready(function(e){if(TTP.isH5){e.addTafListener("getUserLevelInfo",function(a){n(a),e.removeTafListener("getUserLevelInfo")});var a=new HUYA.GetUserLevelInfoReq;a.tId=e.userId,e.sendWup("huyauserui","getUserLevelInfo",a)}else TTP.one("getUserLevelInfoRsp",function(e){n(e.param)}),e.callAs("getUserLevelInfo")})},userLevel=module.exports=new UserLevel;userLevel.change(function(n){new Tips(n)})});
;dwfis.define("widget/game_promote",function(require,exports,module){function Board(){function e(){o.show()}function a(){o.hide()}var o=$(".J_gamePromoteContainer"),r=new $.Callbacks;return o.on("click",".J_gamePromoteX",function(e){e.preventDefault(),a(),r.fire()}),{open:e,close:a,onClickClose:function(e){r.add(e)}}}function getData(e){$.ajax({url:TT.app.main+"cache.php?m=MobileGameApi&do=getWebMobileGameInfo",type:"GET",dataType:"json",data:{gameId:TTR.gid,pid:TTA.lp},success:function(a){a&&200==a.status&&a.data&&a.data.length&&a.data[0]&&a.data[0].codepic_url&&e(a.data[0])}})}{var TTR=require("TTR"),TTA=require("TTA");require("tools")}setTimeout(function(){getData(function(data){var tpl=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="gamePromote J_gamePromote">\r\n    <div class="gamePromote-hd">\r\n        <span class="gamePromote-tit">\u4e0b\u8f7d\u6e38\u620f</span>\r\n    </div>   \r\n    <div class="gamePromote-bd J_gamePromoteContainer">\r\n        <div class="gamePromote-cont">\r\n            <div class="board">\r\n                <div class="board-hd">\u5feb\u6765\u8ddf\u4e3b\u64ad\u4e00\u8d77\u73a9</div>\r\n                <div class="board-bd">\r\n                    <p class="board-game">'+(null==(__t=data.game_name)?"":_.escape(__t)),1==data.gift_display&&(__p+="<i></i>"),__p+='</p>\r\n                    <div class="board-qrcode">\r\n                        <img src="'+(null==(__t=TT.trimUrl(data.codepic_url))?"":__t)+'" alt="'+(null==(__t=data.game_name)?"":_.escape(__t))+'" />\r\n                    </div>\r\n                    <p class="board-des">\u626b\u63cf\u4e8c\u7ef4\u7801\u4e0b\u8f7d\u6e38\u620f</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <i class="gamePromote-x J_gamePromoteX"></i>\r\n    </div>\r\n</div>\r\n';return __p};$(".J_roomHdCtrlOther").append(tpl({data:data})),TT.emit("ROOM_HEADER_CTRL_RESIZE");var board=new Board,isNormal=!0,timer=null;try{var key="TT_GAME_"+TTR.gid+"_PROMOTE";localStorage.getItem(key)||(timer=setTimeout(function(){isNormal=!1,$(".J_gamePromote").addClass("passiveTrigger"),board.open();try{ya.reportProductEvent({eid:"click/room/web/game/psitips",eid_desc:"\u70b9\u51fb/\u76f4\u64ad\u95f4/\u6e38\u620f\u4e0b\u8f7d\u5165\u53e3/\u88ab\u52a8\u89e6\u53d1"})}catch(e){}board.onClickClose(function(){localStorage.setItem(key,"1"),$(".J_gamePromote").removeClass("passiveTrigger"),isNormal=!0;try{ya.reportProductEvent({eid:"click/room/web/game/closetips",eid_desc:"\u70b9\u51fb/\u76f4\u64ad\u95f4/\u6e38\u620f\u4e0b\u8f7d\u5165\u53e3/\u5173\u95ed"})}catch(e){}})},TT.isProd?6e4:6e3))}catch(e){}$(".J_gamePromote").on("mouseenter",function(){if(isNormal){board.open();try{ya.reportProductEvent({eid:"click/room/web/game/initips",eid_desc:"\u70b9\u51fb/\u76f4\u64ad\u95f4/\u6e38\u620f\u4e0b\u8f7d\u5165\u53e3/\u4e3b\u52a8\u89e6\u53d1"})}catch(e){}null!==timer&&clearTimeout(timer)}}).on("mouseleave",function(){isNormal&&board.close()})})},0)});
;dwfis.define("widget/game_buy",function(require,exports,module){function Box(data){var tpl=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="gameBuy" id="J_gameBuy">\r\n    <div class="gameBuy-hd">\r\n        <span class="gameBuy-tit">\u4e0b\u8f7d\u6e38\u620f</span>\r\n    </div>   \r\n    <div class="gameBuy-bd">\r\n        <div class="gameBuy-cont">\r\n            <p class="gameBuy-des">\u4e3b\u64ad\u8fd8\u559c\u6b22\u73a9\u8fd9\u4e9b\u6e38\u620f\u54e6\uff0c\u4f60\u4e5f\u6765\u8bd5\u8bd5\u5427~</p>\r\n            <div class="gameBuy-list">\r\n                <ul>\r\n                    ',$.each(data,function(a,e){__p+='\r\n                    <li>\r\n                        <a class="gameBuy-item J_game" href="#" data-index="'+(null==(__t=a)?"":__t)+'">\r\n                            <span class="game-pic">\r\n                                <img src="'+(null==(__t=TT.trimUrl(e.img_cover))?"":__t)+'" alt="'+(null==(__t=e.name)?"":_.escape(__t))+'">\r\n                            </span>\r\n                            <div class="game-cont">\r\n                                <p class="game-name">'+(null==(__t=e.name)?"":_.escape(__t))+'</p>\r\n                                <p class="game-comments">'+(null==(__t=e.comments)?"":_.escape(__t))+'</p>\r\n                                <p class="game-price">\r\n                                    <i>'+(null==(__t=(e.price.original_price/10).toFixed(2))?"":__t)+"</i>\r\n                                    <b>"+(null==(__t=(e.price.cur_price/10).toFixed(2))?"":__t)+"</b>\r\n                                </p>\r\n                            </div>\r\n                        </a>\r\n                    </li>\r\n                    "}),__p+="\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n";return __p};$(".J_roomHdCtrlOther").append(tpl({data:data})),TT.emit("ROOM_HEADER_CTRL_RESIZE"),$("#J_gameBuy").on("click",".J_game",function(a){a.preventDefault();var e=$(this).data("index"),n=data[e];if(n&&n.pay_url){createPay(n);try{ya.reportProductEvent({eid:"click/zhibo/danji/download",eid_desc:"\u70b9\u51fb/\u76f4\u64ad\u95f4/\u5355\u673a\u6e38\u620f\u4e0b\u8f7d/\u6e38\u620f"})}catch(a){}}}).on("mouseenter",function(){try{ya.reportProductEvent({eid:"pv/zhibo/danji/download",eid_desc:"\u76f4\u64ad\u95f4/\u5355\u673a\u6e38\u620f\u4e0b\u8f7d/\u66dd\u5149\u91cf"})}catch(a){}})}function createPay(a){{var e={game_id:a.game_id,ref:"1782806062:"+[TTA.lp,TTR.gid,a.price.cur_price].join("|")},n=a.pay_url+"?"+$.param(e);new dialog({title:a.name,content:'<div class="J_webGamePay gameBuy-payFrame"></div>',buttons:[],init:function(){var a=document.createElement("iframe");a.width=750,a.height=560,a.frameborder=0,$(".J_webGamePay").append(a);var e=function(){};a.attachEvent?a.attachEvent("onload",e):a.onload=e,a.src=n}})}}var TTR=require("TTR"),TTA=require("TTA"),dialog=(require("tools"),require("dialog").dialog),getData=function(a){$.ajax({type:"get",url:TT.app.main+"cache1min.php?m=WeGame&gid="+TTR.gid,dataType:"json"}).done(function(e){e&&e.data&&e.data.length&&a(e.data)})};2==TTR.bussType&&document.addEventListener&&getData(function(a){new Box(a)})});
;dwfis.define("formatNumber",function(){function r(r,t){for(var e=r?r.toString().split("."):["0"],s=t?t.split("."):[""],a="",n=e[0],u=s[0],i=n.length-1,b=!1,f=u.length-1;f>=0;f--)switch(u.substr(f,1)){case"#":i>=0&&(a=n.substr(i--,1)+a);break;case"0":a=i>=0?n.substr(i--,1)+a:"0"+a;break;case",":b=!0,a=","+a}if(i>=0)if(b)for(var m=n.length;i>=0;i--)a=n.substr(i,1)+a,i>0&&(m-i)%3==0&&(a=","+a);else a=n.substr(0,i+1)+a;a+=".",n=e.length>1?e[1]:"",u=s.length>1?s[1]:"",i=0;for(var f=0;f<u.length;f++)switch(u.substr(f,1)){case"#":i<n.length&&(a+=n.substr(i++,1));break;case"0":a+=i<n.length?n.substr(i++,1):"0"}return a.replace(/^,+/,"").replace(/\.$/,"")}var t={isFormatNumber:!1,formatNumber:function(r){var t=Number(r);return t&&t>1e4?(t/1e4).toFixed(1)+"\u4e07":t},formatNumber2:r,fnFormat:function(r){if(!this.isFormatNumber){var t=r.find(".js-num"),e=this;t.each(function(r,t){var s=$.trim($(t).text());$(t).text(e.formatNumber(s))}),this.isFormatNumber=!0}}};return t});
;dwfis.define("widget/room-youlike",function(require,exports,module){function RoomYoulike(){this.initialize.apply(this,arguments)}var format=require("formatNumber"),TTR=require("TTR"),tools=require("tools");RoomYoulike.prototype={initialize:function(){TTR.gid?this.getData():($(".youlike").remove(),$(".comp_huya_match_guess_new").remove())},createHtml:function(t,a){var e=this;this.$youlikeList.html(this.tmpl({list:this.dataList.slice(t-1,a),eid:"click/position",position:"room/cnxh",gameType:!0,rankStart:t})),this.$youlikeList.find("img").lazyload({container:$("#main_col")}),this.$youlikeList.find("img").on("error",function(){tools.imgOnError(this)}),$(window).one("load.youlike",function(){e.$youlikeList.find("img").trigger("appear")})},getData:function(){var _this=this;$.getJSON(TT.app.main+"cache10min.php",{m:"Live","do":"getProfileRecommendList",gid:TTR.gid},function(json){200==json.status&&json.data.length>0?(json.data.length<=6&&$(".youlike-page").remove(),_this.dataList=json.data,_this.tmpl=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{}){__p+="";for(var i=0,len=list.length;len>i;i++){var data=list[i];__p+='\r\n<li class="game-live-item" gid="'+(null==(__t=data.gid)?"":__t)+'">\r\n    ';var url=TT.app.main+data.privateHost,seat="";if(1==data.screenType&&2==data.liveSourceType)var screenshot=data.screenshot+"?imageview/4/0/w/190/h/338/rotate/270";else var screenshot=data.screenshot+"?imageview/4/0/w/338/h/190/blur/1";if(seat="undefined"==typeof rankStart?position+"/"+(i+1):position+"/"+(rankStart+i),__p+='\r\n    <a href="'+(null==(__t=url)?"":__t)+'" class="video-info new-clickstat" target="_blank" report=\'{"eid":"'+(null==(__t=eid)?"":__t)+'","position":"'+(null==(__t=seat)?"":__t)+'","game_id":"'+(null==(__t=data.gid)?"":__t)+'","ayyuid":"'+(null==(__t=data.uid)?"":__t)+'","hot_factor":"'+(null==(__t=data.rankLabel)?"":__t)+'"}\'>\r\n        <img class="pic" data-original="'+(null==(__t=TT.trimUrl(screenshot))?"":__t)+'" src="images/338x190.jpg" onerror="this.onerror=null; this.src=\'images/338x190.jpg\';" alt="'+(null==(__t=data.nick)?"":_.escape(__t))+'\u7684\u76f4\u64ad" title="'+(null==(__t=data.nick)?"":_.escape(__t))+'\u7684\u76f4\u64ad">\r\n        ',data.recommendTagName&&(__p+='<em class="tag tag-recommend">'+(null==(__t=data.recommendTagName)?"":__t)+"</em>"),__p+='\r\n        <div class="item-mask"></div>\r\n        <i class="btn-link__hover_i"></i>\r\n        ',"undefined"==typeof rankStart&&1==data.isBluRay&&(__p+='<em class="tag tag-blue">\u84dd\u5149</em>'),__p+="\r\n        ","undefined"!=typeof rankStart&&(__p+='\r\n            <em class="tag tag-rank tag-rank-'+(null==(__t=rankStart+i)?"":__t)+'">No.'+(null==(__t=rankStart+i)?"":__t)+"</em>\r\n        "),__p+="\r\n        ",data.rankLabel&&(__p+='\r\n            <em class="tag tag-hot">'+(null==(__t=data.rankLabel)?"":__t)+"</em>\r\n        "),__p+='\r\n    </a>\r\n    <a href="'+(null==(__t=url)?"":__t)+'" class="title new-clickstat" target="_blank" report=\'{"eid":"'+(null==(__t=eid)?"":__t)+'","position":"'+(null==(__t=seat)?"":__t)+'","game_id":"'+(null==(__t=data.gid)?"":__t)+'","ayyuid":"'+(null==(__t=data.uid)?"":__t)+'"}\' title="'+(null==(__t=HUYA_UTIL.xssFilter(data.introduction))?"":__t)+'" target="_blank">'+(null==(__t=HUYA_UTIL.xssFilter(data.introduction))?"":__t)+'</a>\r\n    <span class="txt">\r\n        <span class="avatar fl">\r\n            <img data-original="'+(null==(__t=TT.trimUrl(data.avatar180))?"":__t)+'" src="images/84x84.jpg" onerror="this.onerror=null; this.src=\'images/84x84.jpg\';" alt="'+(null==(__t=data.nick)?"":_.escape(__t))+'" title="'+(null==(__t=data.nick)?"":_.escape(__t))+'">\r\n            <i class="nick" title="'+(null==(__t=data.nick)?"":_.escape(__t))+'">'+(null==(__t=HUYA_UTIL.xssFilter(data.nick))?"":__t)+"</i>\r\n        </span>\r\n        ",gameType){if(""!=data.gameHostName)var gameTypeUrl=TT.app.main+"g/"+data.gameHostName;else var gameTypeUrl=TT.app.main+"g/"+data.gid;__p+='\r\n        <span class="game-type fr"><a target="_blank" href="'+(null==(__t=gameTypeUrl)?"":__t)+'" title="'+(null==(__t=data.gameFullName)?"":__t)+'">'+(null==(__t=data.gameFullName)?"":__t)+"</a></span>\r\n        "}__p+='\r\n        <span class="num"><i class="num-icon"></i><i class="js-num">'+(null==(__t=format.formatNumber(data.totalCount))?"":__t)+"</i></span>\r\n    </span>\r\n</li>\r\n"}__p+="\r\n"}return __p},_this.$youlikeList=$("#youlike-list"),_this.createHtml(1,6),$(".youlike-page").length>0&&_this.bindEvent(),DUYA_SUB.publish("roomRespondCard")):($(".youlike").remove(),$(".comp_huya_match_guess_new").remove())})},bindEvent:function(){function t(){var t=3*(i-1)+1,a=3*i+3>=n.dataList.length?n.dataList.length:3*i+3;n.createHtml(t,a)}var a=$(".youlike-prev"),e=$(".youlike-next"),i=1,n=this;a.on("click",function(){var a=$(this);return a.hasClass("disable")?!1:(e.removeClass("disable"),i--,1==i&&a.addClass("disable"),void t())}),e.on("click",function(){var e=$(this);return e.hasClass("disable")?!1:(a.removeClass("disable"),i++,3*i+3>=n.dataList.length&&e.addClass("disable"),void t())})}},window.RoomYoulike=RoomYoulike,$("#youlike-list").length&&new RoomYoulike});
;dwfis.define("widget/room-video",function(require,exports,module){var anchor=require("TTA"),godLens={init:function(){this.getlistbyuid()},getlistbyuid:function(){var $huyaVideo=$("#huya-video"),tmpl="";$huyaVideo.length>0&&$.getJSON("//v.huya.com/index.php?callback=?",{r:"api/getlistbyuid",uid:anchor.lp},function(json){json&&json.length>0?(tmpl=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{}){__p+="";for(var data,i=0,len=aData.length;len>i;i++)data=aData[i],__p+='\r\n<li class="game-live-item">\r\n    <a href="'+(null==(__t=data.video_url)?"":__t)+'" class="video-info clickstat" target="_blank" eid="click/zhibo/tjwz/video'+(null==(__t=i+1)?"":__t)+'" eid_desc="\u70b9\u51fb/\u76f4\u64ad\u95f4/\u63a8\u8350\u4f4d\u7f6e/\u89c6\u9891'+(null==(__t=i+1)?"":__t)+'">\r\n            <img class="pic" data-original="'+(null==(__t=TT.trimUrl(data.video_cover).replace("220x124","460x268"))?"":__t)+'" alt="'+(null==(__t=data.video_title)?"":_.escape(__t))+'" src="images/338x190.jpg" onerror="this.onerror=null; this.src=\'images/338x190.jpg\';">\r\n        <span class="video_duration">'+(null==(__t=data.video_duration)?"":_.escape(__t))+'</span>\r\n        <div class="item-mask"></div>\r\n        <i class="btn-link__hover_i"></i>\r\n        ',data.rank&&(__p+='\r\n        <em class="tag tag-recommend">\r\n            ',data.rank.indexOf("NO.")>-1&&(__p+="\r\n            <span></span>\r\n            "),__p+="\r\n            "+(null==(__t=data.rank)?"":__t)+"\r\n        </em>\r\n        "),__p+='\r\n    </a>\r\n    <a href="'+(null==(__t=data.video_url)?"":__t)+'" class="title clickstat" target="_blank" id="click/zhibo/tjwz/video'+(null==(__t=i+1)?"":__t)+'" eid_desc="\u70b9\u51fb/\u76f4\u64ad\u95f4/\u63a8\u8350\u4f4d\u7f6e/\u89c6\u9891'+(null==(__t=i+1)?"":__t)+'">'+(null==(__t=data.video_title)?"":_.escape(__t))+'</a>\r\n    <div class="txt">\r\n	    <span class="avatar fl">\r\n	        <img alt="'+(null==(__t=data.video_title)?"":_.escape(__t))+'" data-original="'+(null==(__t=TT.trimUrl(data.user_avatar))?"":__t)+'" src="images/default_avatar.jpg">\r\n	    	<i class="nick" title="'+(null==(__t=data.user_nickname)?"":_.escape(__t))+'"> '+(null==(__t=data.user_nickname)?"":_.escape(__t))+'</i>\r\n	    </span>\r\n        <span class="num"><i class="num-icon"></i><i class="js-num">'+(null==(__t=data.video_play_num)?"":__t)+"</i></span>\r\n    </div>\r\n</li>\r\n";__p+="\r\n"}return __p},$huyaVideo.html(tmpl({aData:json.slice(0,6)})),DUYA_SUB.publish("roomRespondCard"),$huyaVideo.find("img").lazyload({container:$("#main_col"),threshold:100})):$(".huya-video").remove()})}};godLens.init()});
;dwfis.define("respondCard",function(t,e,i){function n(){this.initialize.apply(this,arguments)}n.prototype={initialize:function(t){this.$wrapElement=$(t.wrapElement),this.$itemElement=this.$wrapElement.find(t.itemElement),this.itemWidth=this.$itemElement.outerWidth(),this.createCsstext=t.createCsstext,this.iMargin=this.$itemElement.outerWidth(!0)-this.itemWidth,this.scale=t.scale,this.calculation(),this.bindEvent()},_importStyle:function(t,e){if(!document.getElementById(e)){var i=document.createElement("style");if(e&&(i.id=e),document.getElementsByTagName("head")[0].appendChild(i),i.styleSheet){if(document.getElementsByTagName("style").length>31)throw new Error("Exceed the maximal count of style tags in IE");i.styleSheet.cssText=t}else i.innerHTML=t}},calculation:function(){var t=this.$wrapElement.innerWidth(),e=Math.floor(t/(this.itemWidth+this.iMargin)),i=Math.floor(t/e)-this.iMargin,n=Math.floor(i/this.scale),s=this.createCsstext(i,n),l=document.getElementById("respondStyle");l?l.styleSheet?l.styleSheet.cssText=s:l.innerHTML=s:this._importStyle(s,"respondStyle")},bindEvent:function(){var t=this;$(window).on("resize.responseCard",function(){t.calculation()})}},i.exports=n});
;dwfis.define("app/room_normal",function(t){var e=t("TTP"),i=t("TTR"),o=t("h5playeOnloadReport"),a=t("liveRoomPvReport"),r=t("liveRoomDurationReport"),n=t("tools");t("room_core"),t.async("roomMakeMoney");var s=$(".chat-room__hd").find(".current").attr("tab_index");!function(){function t(t){if(!(parseInt(t)<=0)){var o=TT.app.act+"webAct/roomActivity.js?v="+t;$.ajax({url:o,dataType:"script",type:"GET",cache:!0,success:function(){roomActivity.loadAct(t,e,i,n)}})}}var o=TT.app.main+"cache5min.php?m=WhiteListApi&do=getWhiteList&type=webVersion";$.ajax({url:o,type:"GET",dataType:"json",success:function(e){(200==e.status||"200"==e.status)&&t&&t(e.data)}})}(),t("widget/room-youlike"),t("widget/room-video");var c=t("respondCard"),p=_.once(function(){var t=new c({wrapElement:".recom-list",itemElement:".game-live-item",scale:280/158,createCsstext:function(t,e){var i=".recom-list .game-live-item {width:"+t+"px!important;}";return i+=".recom-list {height:"+(e+70)+"px!important;}",i+=".recom-list .video-info {height:"+e+"px!important;}"}});DUYA_SUB.subscribe("sidebarShow",function(){setTimeout(function(){t.calculation()},0)}),DUYA_SUB.subscribe("sidebarHide",function(){setTimeout(function(){t.calculation()},0)})});DUYA_SUB.subscribe("roomRespondCard",function(){p()});var h=function(){var t=$(window),e=9/16,o=$(".room-player-wrap"),a=$("#J_playerMain"),r=$(".room-sidebar"),n=$(".chat-room__hd").outerHeight(!0),c=$(".room-hd").outerHeight(!0),p=$("#duya-header").height(),h=$("#tipsOrchat"),u=h.outerHeight(!0),d=100,m=$(".week-rank").length>0?130:0;return i.isReplay&&(d=40),function(){var i=parseInt(a.width()*e)+d,h=t.height()-c-p-10;if(i>h&&(i=h,a.css({height:"100%","padding-bottom":0})),o.height(i),$(".chat-room__bd").height(r.height()-u-n-m),3!=s){var l=$(".chat-room__bd"+s).find(".chat-roomOther__scroll");l.data("jsp")&&l.data("jsp").reinitialise()}}}();DUYA_SUB.subscribe("resizeWide",function(){h()}),h(),function(){var t=i.state.toLowerCase();e.isH5&&e.onload(function(){o({state:t,type:0})}),a({state:t,type:0,player:e.isH5?0:1}),i.isOn&&r({type:0})}()});